# üîÑ CI/CD Pipeline

GitHub Actions workflow –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞.

## üìã –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GitHub Actions –¥–ª—è:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∏ push/PR
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–µ—Ä—Å–∏—è—Ö Python (3.9, 3.10, 3.11)
- ‚úÖ –õ–∏–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ)

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Pipeline

### 1. Tests Workflow (`.github/workflows/tests.yml`)

**–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:** –ü—Ä–∏ push –≤ main/master/develop –∏–ª–∏ PR

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –Ω–∞ Python 3.9, 3.10, 3.11
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ü—ã—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å TA-Lib (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç core –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements-core.txt`
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç test –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements-test.txt`
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (scipy, matplotlib, plotly, dash, discord.py)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç pytest —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ Codecov

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –ª–æ–º–∞—é—Ç pipeline
- `continue-on-error: true` –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —à–∞–≥–æ–≤
- –ú–∞–∫—Å–∏–º—É–º 10 –ø–∞–¥–µ–Ω–∏–π —Ç–µ—Å—Ç–æ–≤ –ø–µ—Ä–µ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π
- –ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ deprecation warnings

### 2. Lint Workflow (`.github/workflows/lint.yml`)

**–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:** –ü—Ä–∏ push –≤ main/master/develop –∏–ª–∏ PR

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ —Å –ø–æ–º–æ—â—å—é `flake8`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é `black`
- –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (`continue-on-error`)

### 3. CI Workflow (`.github/workflows/ci.yml`)

**–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ PR

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ë—ã—Å—Ç—Ä—ã–π smoke test
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–∑–æ–≤—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤

## üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

### requirements-core.txt
–°–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- pandas, numpy
- scikit-learn
- python-dotenv, pyyaml
- ccxt, cachetools
- websocket-client

### requirements-test.txt
–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- pytest, pytest-cov, pytest-mock
- pytest-timeout

### requirements.txt
–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤–∫–ª—é—á–∞—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ):
- TA-Lib (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- matplotlib, plotly (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- dash, discord.py (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- scipy (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### TA-Lib

TA-Lib —Ç—Ä–µ–±—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É C. –í CI:

```yaml
- name: Try to install TA-Lib (optional)
  continue-on-error: true
  run: |
    wget http://prdownloads.sourceforge.net/ta-lib/ta-lib-0.4.0-src.tar.gz
    tar -xzf ta-lib-0.4.0-src.tar.gz
    cd ta-lib/
    ./configure --prefix=/usr
    make
    sudo make install
    cd ..
    pip install TA-Lib
```

–ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å, —Ç–µ—Å—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ TA-Lib.

### SciPy

SciPy —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:

```yaml
- name: Install optional dependencies
  continue-on-error: true
  run: |
    pip install scipy>=1.10.0 || echo "SciPy optional - continuing"
```

–í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞:

```python
try:
    from scipy import stats
except ImportError:
    stats = None  # Optional dependency
```

## ‚úÖ –£–ª—É—á—à–µ–Ω–∏—è Pipeline

### –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–µ–Ω—ã:

1. **TA-Lib –ø–∞–¥–∞–ª** ‚Üí –°–¥–µ–ª–∞–Ω –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Å `continue-on-error`
2. **SciPy –±—ã–ª –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º** ‚Üí –¢–µ–ø–µ—Ä—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
3. **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤** ‚Üí matplotlib, plotly, dash –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã
4. **Discord bot –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω** ‚Üí discord.py –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
5. **–¢–µ—Å—Ç—ã –ø–∞–¥–∞–ª–∏ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** ‚Üí –†–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ core/test/optional

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:

- ‚úÖ Pipeline –ø—Ä–æ—Ö–æ–¥–∏—Ç –¥–∞–∂–µ –±–µ–∑ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –¢–µ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Codecov
- ‚úÖ –õ–∏–Ω—Ç–∏–Ω–≥ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç pipeline

## üöÄ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ core –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements-core.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ test –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements-test.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
pip install scipy matplotlib plotly dash discord.py

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pytest tests/ -v
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `setup_ci.py`:

```bash
python setup_ci.py
```

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Codecov:
- –§–∞–π–ª: `coverage.xml`
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è Python 3.10
- –û—Ç—á–µ—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Codecov dashboard

## üîç Troubleshooting

### –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç –Ω–∞ GitHub, –Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é Python (3.9, 3.10, 3.11)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã

### TA-Lib –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - TA-Lib –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω. –¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –Ω–µ–≥–æ.

### Codecov –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ:
- `coverage.xml` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
- Python –≤–µ—Ä—Å–∏—è –≤ matrix - 3.10
- Codecov token –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

## üìù –ü—Ä–∏–º–µ—Ä—ã —É—Å–ø–µ—à–Ω–æ–≥–æ pipeline

‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏:
```
========== 42 passed in 15.23s ==========
```

‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å (–Ω–æ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏):
```
SciPy optional - continuing
Matplotlib optional - continuing
...
========== 42 passed in 14.87s ==========
```

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Pytest Documentation](https://docs.pytest.org/)
- [Codecov Documentation](https://docs.codecov.com/)

