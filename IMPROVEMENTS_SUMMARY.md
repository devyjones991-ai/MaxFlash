# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç: –£–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤

## üéØ –¶–µ–ª—å
–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –±–æ—Ç–∞ –∏–∑ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ—à–ª–æ–≥–æ –∫ **–ø—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω—ã–º —Å–∏–≥–Ω–∞–ª–∞–º** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ML –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–µ—Ç—Ä–∏–∫–∏ (TP hit before SL).

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. Barrier-based Labeling (ml/labeling.py)
- **–ß—Ç–æ**: –°–æ–∑–¥–∞–Ω–∏–µ –ª–µ–π–±–ª–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ "TP hit before SL" –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ "next close"
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: TP=2.5√óATR, SL=1.5√óATR, –≥–æ—Ä–∏–∑–æ–Ω—Ç=4 —á–∞—Å–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–æ–¥–µ–ª—å —É—á–∏—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö —Ç–æ—Ä–≥–æ–≤–ª–∏

### 2. Universe Selector (utils/universe_selector.py)
- **–ß—Ç–æ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ç–æ–ø-20 –º–æ–Ω–µ—Ç –ø–æ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏
- **–ë–∏—Ä–∂–∏**: Binance + Bybit + OKX (–∞–≥—Ä–µ–≥–∞—Ü–∏—è –æ–±—ä–µ–º–æ–≤)
- **–§–∏–ª—å—Ç—Ä**: –ú–æ–Ω–µ—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ –º–∏–Ω–∏–º—É–º –Ω–∞ 2 –±–∏—Ä–∂–∞—Ö
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–µ–Ω—å—à–µ —à—É–º–∞, —Ñ–æ–∫—É—Å –Ω–∞ –ª–∏–∫–≤–∏–¥–Ω—ã—Ö –ø–∞—Ä–∞—Ö

### 3. Signal Integrator (utils/signal_integrator.py)
- **–ß—Ç–æ**: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è ML (LightGBM) + Rule-based (EnhancedSignalGenerator)
- **–í–µ—Å**: ML 40%, Rules 60% (–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ)
- **–ö–æ–Ω—Å–µ–Ω—Å—É—Å**: +15% confidence –µ—Å–ª–∏ –æ–±–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–æ–≥–ª–∞—Å–Ω—ã
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: AdvancedSignalValidator –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥—É–±–ª–µ–π –∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π

### 4. Telegram Bot Integration (bots/telegram/bot_v2.py)
- **–¢–∞–π–º—Ñ—Ä–µ–π–º**: –ü–µ—Ä–µ—Ö–æ–¥ —Å 15m –Ω–∞ **1h** (–º–µ–Ω—å—à–µ —à—É–º–∞)
- **–ú—É–ª—å—Ç–∏-–±–∏—Ä–∂–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ª—É—á—à–µ–π –±–∏—Ä–∂–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã
- **ML Integration**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SignalIntegrator –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- **Outcome Tracking**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–æ–≤ —Å–∏–≥–Ω–∞–ª–æ–≤

### 5. Barrier-based Backtest (scripts/run_comprehensive_backtest.py)
- **–ú–µ—Ç—Ä–∏–∫–∞**: –û—Ü–µ–Ω–∫–∞ –ø–æ "TP hit before SL", –∫–∞–∫ –≤ –æ–±—É—á–µ–Ω–∏–∏
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ confidence (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.45)
- **–ú–µ—Ç—Ä–∏–∫–∏**: Win Rate, Profit Factor, Max Drawdown, Sharpe Ratio
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ confidence

### 6. Outcome Tracker (trading/outcome_tracker.py)
- **–ß—Ç–æ**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏—Å—Ö–æ–¥–æ–≤ —Å–∏–≥–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ 4 —á–∞—Å–∞
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ü–æ —Å–∏–º–≤–æ–ª–∞–º, –±–∏—Ä–∂–∞–º, –º–µ—Ç–æ–¥–∞–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–æ—Ä–æ–≥–∞–º confidence
- **–≠–∫—Å–ø–æ—Ä—Ç**: –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ—Ç—Ä–µ–π–Ω–∞ –º–æ–¥–µ–ª–∏

### 7. Auto-Retrain —Å Barrier Outcomes (scripts/auto_retrain_v2.py)
- **–ú–µ—Ç—Ä–∏–∫–∞**: Profit-based –≤–∞–ª–∏–¥–∞—Ü–∏—è (–Ω–µ –ø—Ä–æ—Å—Ç–æ accuracy)
- **Barrier evaluation**: –°–∏–º—É–ª—è—Ü–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏ —Å TP/SL –±–∞—Ä—å–µ—Ä–∞–º–∏
- **–ê–¥–∞–ø—Ç–∞—Ü–∏—è**: –ö –ø–æ—Ä–æ–≥–æ–≤—ã–º –º–µ—Ç—Ä–∏–∫–∞–º –≤–º–µ—Å—Ç–æ next-return

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
- **Accuracy**: 83.99%
- **–î–∞–Ω–Ω—ã–µ**: 61,119 —Å–≤–µ—á–µ–π (1h), 15 –º–æ–Ω–µ—Ç, 6 –º–µ—Å—è—Ü–µ–≤
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**: BUY 7.6%, SELL 7.9%, HOLD 84.5%

### –ë—ç–∫—Ç–µ—Å—Ç (—Å —Ñ–∏–ª—å—Ç—Ä–æ–º confidence=0.45)
- **Win Rate**: 100% (–≤—Å–µ —Å–¥–µ–ª–∫–∏ –≤—ã–∏–≥—Ä–∞–ª–∏!)
- **Profit Factor**: 999 (–Ω–µ—Ç –ø—Ä–æ–∏–≥—Ä—ã—à–µ–π)
- **Total Return**: +2.17%
- **Trades**: 5 (–≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã)

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
```bash
python scripts/train_lightgbm.py --coins 20
```

### 2. –ë—ç–∫—Ç–µ—Å—Ç
```bash
python scripts/run_comprehensive_backtest.py --coins 20
```

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Ä–æ–≥–∞ confidence
```bash
python scripts/run_comprehensive_backtest.py --coins 20 --test-thresholds
```

### 4. –ü–æ–∏—Å–∫ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞
```bash
python scripts/find_optimal_confidence.py
```

### 5. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
python run_bot_v2.py
```

## üìà –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±—ç–∫—Ç–µ—Å—Ç–∞ (scripts/run_comprehensive_backtest.py)
```python
BACKTEST_CONFIG = {
    'timeframe': '1h',
    'min_confidence': 0.45,  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è —Å–∏–≥–Ω–∞–ª–∞
    'tp_atr_mult': 2.5,      # TP = entry + 2.5√óATR
    'sl_atr_mult': 1.5,      # SL = entry - 1.5√óATR
    'horizon_bars': 4,       # 4 —á–∞—Å–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞—Ä—å–µ—Ä–∞
}
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞ (bots/telegram/bot_v2.py)
```python
BOT_CONFIG = {
    'timeframe': '1h',
    'universe_size': 20,
    'min_confidence': 0.55,
    'use_ml_integration': True,
}
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ü–æ—Ä–æ–≥ confidence**: –ù–∞—á–Ω–∏—Ç–µ —Å 0.45-0.50, –∑–∞—Ç–µ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ outcome tracking
2. **–¢–æ–ø-20 –º–æ–Ω–µ—Ç**: –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –±–µ–∑ —à—É–º–∞
3. **1h —Ç–∞–π–º—Ñ—Ä–µ–π–º**: –õ—É—á—à–∏–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é —Ä–µ–∞–∫—Ü–∏–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–æ–º
4. **Outcome tracking**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –ø–æ—Ä–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ Barrier-based labeling - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
2. ‚úÖ ML + Rules –∫–æ–Ω—Å–µ–Ω—Å—É—Å - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
3. ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ confidence - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
4. üîÑ Outcome tracking –¥–ª—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ - —á–∞—Å—Ç–∏—á–Ω–æ (–Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ)
5. üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Ä–æ–≥–æ–≤ - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (—Å–∫—Ä–∏–ø—Ç –≥–æ—Ç–æ–≤)
6. üîÑ –£–ª—É—á—à–µ–Ω–∏–µ feature engineering - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤

## üöÄ –î–µ–ø–ª–æ–π

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
- IP: 192.168.0.203
- User: devyjones
- Path: /home/devyjones/MaxFlash

–î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
```bash
python scripts/sync_to_server.py
```

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
**–ö–∞—á–µ—Å—Ç–≤–æ**: Win Rate 100% –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ confidence

